# 简介
## 计算机系统层次结构
语言|机器|描述
--|--|--
高级语言|虚拟机器M3|编译程序翻译成汇编语言程序
汇编语言|虚拟机器M2|汇编程序翻译成机械语言程序
操作系统|虚拟机器|机器语言解释操作系统
机械语言|实际机器M1|微指令解释机器指令
微指令系统|微程序机器M0|硬件直接执行微指令
# 计算机的基本组成
## 冯诺依曼计算机特点
1. 计算机由五大部分组成：运算器、控制器、存储器、输入输出设备
2. 指令和数据以同等地位存放于存储器，可按地址寻访
3. 指令和数据用二进制表示
4. 指令由操作码和地址码构成，操作码表示进行何种操作，地址码表示在哪里进行操作
5. ```存储程序```，程序存放于存储器内
6. 以运算器为中心图例中实线表数据流，虚线表控制流
   
   ![冯诺依曼计算机硬件框图](images/feng_neumann.png)
7. 以运算器为中心，运算器会非常繁忙
## 现代计算机系统硬件框图
![现代计算机系统硬件框图](images/现代计算机系统硬件框图.png)
## 存储器
- 存储器基本结构：存储器、MAR、MDR
- 存储单元：存放一串二进制代码
- 存储字：存储单元中二进制代码的组合
- 存储字长：存储单元中二进制代码的位数
- 每个存储单元赋予一个地址，每个存储单元内存放在一个存储字
- 存储单元构成了存储体
- MAR：存储器地址寄存器，可以反映存储单元个数
- MDR：存储器数据寄存器，可以反映存储字长
## 运算器
- 构成：ALU(运算器)、ACC(累加寄存器)、MQ(乘商寄存器)、X(数据寄存器)

### 运算时各寄存器作用

操作|ACC|MQ|X
--|--|--|--
加法|被加数||加数
加法结果|和||
减法|被减数||减数
减法结果|差||
乘法||乘数|被乘数
乘法结果|乘积高位|乘积低位|
除法|被除数||除数
除法结果|余数|商|

## 控制器
### 控制器功能
1. 解释指令
2. 保证指令按序执行

### 完成一条指令
1. 取指令：PC(程序计数器),存放当前预执行指令地址，具有计数功能
2. 分析指令：IR(指令寄存器),存放当前预执行指令
3. 执行指令:CU(控制器)
CU、PC、IR构成了控制器

## 指令实例
取数指令
![取数指令](images/取数指令.png)
存数指令
![存数指令](images/存数指令.png)

# 系统总线
## 基本概念

- 串行总线一次传一位信号，适合远距离传输
- 并行总线一次传多位信号，长距离容易信号干扰

## 总线分类
1. 片内总线：芯片内部的总线
2. 系统总线：计算机各部件之间 的信息传输线
   1. 数据总线：双向 与机器字长、存储字长有关
   2. 地址总线：单向 与存储地址、 I/O地址有关
   3. 控制总线：有出 有入
3. 通信总线：用于 计算机系统之间 或 计算机系统与其他系统（如控制仪表、移动通信等）之间的通信
   1. 串行
   2. 并行

## 总线判优控制
### 基本概念
- 主设备(模块):对总线有控制权
- 从设备(模块):响应主设备发来的总线请求

### 分类
1. 集中式
   1. 链式查询
   2. 计数器定时查询
   3. 独立请求方式
2. 分布式

### 链式查询
![链式查询](images/链式查询.png)
链式查询是指BG线判定优先级时链式查询

### 计数器定时查询
![计数器定时查询](images/计数器定时查询.png)
优先级通过计数器递增查询，计数器初值可随需求定

### 独立请求
![独立请求](images/独立请求.png)

## 总线通信控制
### 总线传输周期
1. 申请分配阶段：主模块申请，主线判优控制
2. 寻址阶段：主模块向从模块给出地址和命令
3. 传输阶段：主从模块交换数据
4. 结束阶段：主模块撤销相关信息
---------------
总线通信四种方式：

1. 同步通信：由统一时标控制数据传送
2. 异步通信：采用应答方式，没有公共时钟标准
3. 半同步通信：引入wait信号，同步、异步结合
4. 分离式通信：充分挖掘系统总线每个瞬间的潜力
### 同步通信
![同步通信](images/同步通信1.png)
![同步通信](images/同步通信2.png)
### 异步通信
![异步通信](images/异步通信.png)